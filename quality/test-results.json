{
  "timestamp": "2026-02-22T09:19:03.605716",
  "ha_url": "http://homeassistant.lan:8123",
  "total_battery_entities": 212,
  "tests": [
    {
      "name": "REST API Connectivity",
      "status": "PASSED",
      "duration_ms": 12.6,
      "message": "REST API /api/ endpoint responds correctly",
      "details": {
        "status_code": 200,
        "response": {
          "message": "API running."
        },
        "response_time_ms": 12.6
      }
    },
    {
      "name": "REST API Authentication",
      "status": "PASSED",
      "duration_ms": 34.94,
      "message": "Authentication token works for /api/states",
      "details": {
        "total_entities": 1577,
        "status_code": 200,
        "response_time_ms": 34.94
      }
    },
    {
      "name": "Battery Entity Inventory",
      "status": "PASSED",
      "duration_ms": 26.07,
      "message": "Found 212 battery entities out of 1577 total",
      "details": {
        "total_entities": 1577,
        "battery_entities": 212,
        "state_distribution": {
          "numeric": 171,
          "unavailable": 33,
          "unknown": 4,
          "other": 4
        },
        "response_time_ms": 26.07
      }
    },
    {
      "name": "Battery Entity Data Quality",
      "status": "FAILED",
      "duration_ms": 0.01,
      "message": "Some entities missing attributes: {'device_class': 0, 'friendly_name': 0, 'unit_of_measurement': 2}",
      "details": {
        "total_battery_entities": 212,
        "sample_size": 5,
        "missing_attributes": {
          "device_class": 0,
          "friendly_name": 0,
          "unit_of_measurement": 2
        },
        "sample_entities": [
          {
            "entity_id": "sensor.battery_level_2",
            "state": "unknown",
            "has_device_class": true,
            "has_friendly_name": true,
            "has_unit_of_measurement": true
          },
          {
            "entity_id": "sensor.sm_g955u_battery_state",
            "state": "unknown",
            "has_device_class": true,
            "has_friendly_name": true,
            "has_unit_of_measurement": false
          },
          {
            "entity_id": "sensor.battery_level",
            "state": "unknown",
            "has_device_class": true,
            "has_friendly_name": true,
            "has_unit_of_measurement": true
          },
          {
            "entity_id": "sensor.battery_state",
            "state": "unknown",
            "has_device_class": true,
            "has_friendly_name": true,
            "has_unit_of_measurement": false
          },
          {
            "entity_id": "sensor.pixel_6_battery_level",
            "state": "52",
            "has_device_class": true,
            "has_friendly_name": true,
            "has_unit_of_measurement": true
          }
        ],
        "response_time_ms": 0.01
      }
    },
    {
      "name": "WebSocket Connectivity",
      "status": "PASSED",
      "duration_ms": 25.38,
      "message": "WebSocket connection established and authenticated",
      "details": {
        "ws_url": "ws://homeassistant.lan:8123/api/websocket",
        "auth_type": "auth_ok",
        "response_time_ms": 25.38
      }
    },
    {
      "name": "WebSocket State Subscription",
      "status": "PASSED",
      "duration_ms": 1030.59,
      "message": "State subscription successful (no state changes during test)",
      "details": {
        "subscribed_entity": "sensor.battery_level_2",
        "events_received": 0,
        "response_time_ms": 1030.59
      }
    },
    {
      "name": "Entity State Change via REST API",
      "status": "PASSED",
      "duration_ms": 10.45,
      "message": "Successfully changed state from 52 to 53",
      "details": {
        "entity_id": "sensor.pixel_6_battery_level",
        "original_state": "52",
        "new_state": "53",
        "response_time_ms": 10.45
      }
    },
    {
      "name": "Query Performance (1500+ entities)",
      "status": "PASSED",
      "duration_ms": 75.06,
      "message": "Query performance: EXCELLENT (75.06ms for 1577 entities)",
      "details": {
        "entity_count": 1577,
        "response_time_ms": 75.06,
        "entities_per_second": 21009.29
      }
    }
  ],
  "summary": {
    "passed": 7,
    "failed": 1,
    "errors": 0,
    "skipped": 0
  }
}